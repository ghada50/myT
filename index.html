<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TubeSpark - YouTube SEO Tool</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- React and ReactDOM CDNs -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <!-- Babel CDN for JSX transformation in browser -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        /* Custom styles for Inter font and general body styling */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #FFFFFF; /* Pure White Background */
            color: #374151; /* Charcoal Text */
        }
        /* Hide scrollbar for a cleaner look, but allow scrolling */
        ::-webkit-scrollbar {
            width: 0px;
            background: transparent; /* make scrollbar transparent */
        }
        /* Custom Tailwind colors for better adherence to palette */
        :root {
            --color-youtube-red: #FF0000;
            --color-deep-gray: #1F2937;
            --color-electric-blue: #3B82F6;
            --color-pure-white: #FFFFFF;
            --color-charcoal: #374151;
        }
        .bg-youtube-red { background-color: var(--color-youtube-red); }
        .text-youtube-red { color: var(--color-youtube-red); }
        .border-youtube-red { border-color: var(--color-youtube-red); }
        .hover\:bg-youtube-red-dark:hover { background-color: #CC0000; } /* Slightly darker red for hover */
        .bg-deep-gray { background-color: var(--color-deep-gray); }
        .text-deep-gray { color: var(--color-deep-gray); }
        .bg-electric-blue { background-color: var(--color-electric-blue); }
        .text-electric-blue { color: var(--color-electric-blue); }
        .border-electric-blue { border-color: var(--color-electric-blue); }
        .hover\:bg-electric-blue-dark:hover { background-color: #2A65D0; } /* Slightly darker blue for hover */
        .bg-pure-white { background-color: var(--color-pure-white); }
        .text-charcoal { color: var(--color-charcoal); }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // Global variables for Firebase config (not actively used in this version for persistence, but included as per instructions)
        // For local execution, these will be undefined or empty, which is handled.
        const __app_id = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';
        const __firebase_config = typeof __firebase_config !== 'undefined' ? __firebase_config : '{}';
        const __initial_auth_token = typeof __initial_auth_token !== 'undefined' ? __initial_auth_token : '';

        /**
         * Utility function to copy text to the user's clipboard.
         * Uses document.execCommand('copy') for broader compatibility in iframe environments.
         * @param {string} text - The text to copy.
         */
        const copyToClipboard = (text) => {
            const textarea = document.createElement('textarea');
            textarea.value = text;
            document.body.appendChild(textarea);
            textarea.select();
            try {
                document.execCommand('copy');
                // Optional: Add a temporary visual feedback like a "Copied!" tooltip
            } catch (err) {
                console.error('Failed to copy text: ', err);
            }
            document.body.removeChild(textarea);
        };

        // --- COMPONENTS ---

        /**
         * VideoTypeSelector Component
         * Allows users to select the type of video (Regular, Live Stream, Shorts).
         * @param {object} props - Component props.
         * @param {string} props.selectedVideoType - The currently selected video type.
         * @param {function} props.setSelectedVideoType - Function to update the selected video type.
         */
        const VideoTypeSelector = ({ selectedVideoType, setSelectedVideoType }) => (
            <section className="bg-pure-white p-6 rounded-lg shadow-md mb-8">
                <h2 className="text-xl font-bold mb-6 text-charcoal">Choose Your Video Type</h2>
                <div className="grid grid-cols-1 md:grid-cols-3 gap-6">
                    {/* Regular Video Card */}
                    <div
                        className={`p-6 border-2 rounded-lg cursor-pointer transition-all duration-200
                            ${selectedVideoType === 'regular' ? 'border-youtube-red shadow-lg' : 'border-gray-200 hover:border-gray-300'}`}
                        onClick={() => setSelectedVideoType('regular')}
                    >
                        <div className="flex items-center mb-4">
                            <div className={`w-10 h-10 rounded-full flex items-center justify-center mr-3
                                ${selectedVideoType === 'regular' ? 'bg-red-100 text-youtube-red' : 'bg-gray-100 text-gray-500'}`}>
                                <svg className="w-6 h-6" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                                    <path fillRule="evenodd" d="M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-4 4 4 4-4V5h-2l-4 4-4-4H4v10zm-4-8a1 1 0 100 2 1 1 0 000-2z" clipRule="evenodd"></path>
                                </svg>
                            </div>
                            <h3 className="font-semibold text-lg text-charcoal">Regular Video</h3>
                            {selectedVideoType === 'regular' && (
                                <span className="ml-auto text-youtube-red">
                                    <svg className="w-5 h-5" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                                        <path fillRule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clipRule="evenodd"></path>
                                    </svg>
                                </span>
                            )}
                        </div>
                        <p className="text-sm text-gray-600 mb-2">Standard YouTube videos with full-length content</p>
                        <ul className="text-xs text-gray-500 space-y-1">
                            <li className="flex items-center"><span className="w-1.5 h-1.5 bg-gray-400 rounded-full mr-2"></span>Long-form content</li>
                            <li className="flex items-center"><span className="w-1.5 h-1.5 bg-gray-400 rounded-full mr-2"></span>Detailed descriptions</li>
                            <li className="flex items-center"><span className="w-1.5 h-1.5 bg-gray-400 rounded-full mr-2"></span>Comprehensive tags</li>
                        </ul>
                    </div>

                    {/* Live Stream Card */}
                    <div
                        className={`p-6 border-2 rounded-lg cursor-pointer transition-all duration-200
                            ${selectedVideoType === 'live-stream' ? 'border-youtube-red shadow-lg' : 'border-gray-200 hover:border-gray-300'}`}
                        onClick={() => setSelectedVideoType('live-stream')}
                    >
                        <div className="flex items-center mb-4">
                            <div className={`w-10 h-10 rounded-full flex items-center justify-center mr-3
                                ${selectedVideoType === 'live-stream' ? 'bg-red-100 text-youtube-red' : 'bg-gray-100 text-gray-500'}`}>
                                <svg className="w-6 h-6" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                                    <path fillRule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM7 9a1 1 0 100-2 1 1 0 000 2zm2 1a1 1 0 100-2 1 1 0 000 2zm2-1a1 1 0 100-2 1 1 0 000 2zm3 0a1 1 0 100-2 1 1 0 000 2z" clipRule="evenodd"></path>
                                </svg>
                            </div>
                            <h3 className="font-semibold text-lg text-charcoal">Live Stream</h3>
                            {selectedVideoType === 'live-stream' && (
                                <span className="ml-auto text-youtube-red">
                                    <svg className="w-5 h-5" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                                        <path fillRule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clipRule="evenodd"></path>
                                    </svg>
                                </span>
                            )}
                        </div>
                        <p className="text-sm text-gray-600 mb-2">Real-time streaming content</p>
                        <ul className="text-xs text-gray-500 space-y-1">
                            <li className="flex items-center"><span className="w-1.5 h-1.5 bg-gray-400 rounded-full mr-2"></span>Live engagement</li>
                            <li className="flex items-center"><span className="w-1.5 h-1.5 bg-gray-400 rounded-full mr-2"></span>Real-time optimization</li>
                            <li className="flex items-center"><span className="w-1.5 h-1.5 bg-gray-400 rounded-full mr-2"></span>Stream-specific tags</li>
                        </ul>
                    </div>

                    {/* YouTube Shorts Card */}
                    <div
                        className={`p-6 border-2 rounded-lg cursor-pointer transition-all duration-200
                            ${selectedVideoType === 'youtube-shorts' ? 'border-youtube-red shadow-lg' : 'border-gray-200 hover:border-gray-300'}`}
                        onClick={() => setSelectedVideoType('youtube-shorts')}
                    >
                        <div className="flex items-center mb-4">
                            <div className={`w-10 h-10 rounded-full flex items-center justify-center mr-3
                                ${selectedVideoType === 'youtube-shorts' ? 'bg-red-100 text-youtube-red' : 'bg-gray-100 text-gray-500'}`}>
                                <svg className="w-6 h-6" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                                    <path fillRule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm-1-12a1 1 0 10-2 0v4a1 1 0 102 0V6zm3 0a1 1 0 10-2 0v4a1 1 0 102 0V6z" clipRule="evenodd"></path>
                                </svg>
                            </div>
                            <h3 className="font-semibold text-lg text-charcoal">YouTube Shorts</h3>
                            {selectedVideoType === 'youtube-shorts' && (
                                <span className="ml-auto text-youtube-red">
                                    <svg className="w-5 h-5" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                                        <path fillRule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clipRule="evenodd"></path>
                                    </svg>
                                </span>
                            )}
                        </div>
                        <p className="text-sm text-gray-600 mb-2">Vertical short-form videos under 60 seconds</p>
                        <ul className="text-xs text-gray-500 space-y-1">
                            <li className="flex items-center"><span className="w-1.5 h-1.5 bg-gray-400 rounded-full mr-2"></span>Viral potential</li>
                            <li className="flex items-center"><span className="w-1.5 h-1.5 bg-gray-400 rounded-full mr-2"></span>Trend-focused</li>
                            <li className="flex items-center"><span className="w-1.5 h-1.5 bg-gray-400 rounded-full mr-2"></span>Mobile-first</li>
                        </ul>
                    </div>
                </div>
            </section>
        );

        /**
         * OptimizationForm Component
         * Handles input fields for SEO optimization and trending keyword search.
         * Also triggers AI content generation.
         * @param {object} props - Component props.
         * @param {string} props.currentTitle - State for current video title.
         * @param {function} props.setCurrentTitle - Setter for currentTitle.
         * @param {string} props.mainTopic - State for main video topic.
         * @param {function} props.setMainTopic - Setter for mainTopic.
         * @param {string} props.targetAudience - State for target audience.
         * @param {function} props.setTargetAudience - Setter for targetAudience.
         * @param {string} props.additionalContent - State for additional context.
         * @param {function} props.setAdditionalContent - Setter for additionalContent.
         * @param {string} props.keywordSearchQuery - State for keyword search query.
         * @param {function} props.setKeywordSearchQuery - Setter for keywordSearchQuery.
         * @param {Array<string>} props.trendingKeywords - Array of trending keywords.
         * @param {function} props.setTrendingKeywords - Setter for trendingKeywords.
         * @param {boolean} props.isSearchingKeywords - Loading state for keyword search.
         * @param {function} props.setIsSearchingKeywords - Setter for isSearchingKeywords.
         * @param {string} props.keywordSearchError - Error message for keyword search.
         * @param {function} props.setKeywordSearchError - Setter for keywordSearchError.
         * @param {boolean} props.isGeneratingSEO - Loading state for SEO generation.
         * @param {function} props.setIsGeneratingSEO - Setter for isGeneratingSEO.
         * @param {string} props.seoGenerationError - Error message for SEO generation.
         * @param {function} props.setSeoGenerationError - Setter for seoGenerationError.
         * @param {string} props.selectedVideoType - The currently selected video type.
         * @param {function} props.setGeneratedTitle - Setter for generatedTitle.
         * @param {function} props.setGeneratedDescription - Setter for generatedDescription.
         * @param {function} props.setGeneratedHashtags - Setter for generatedHashtags.
         * @param {function} props.setGeneratedTags - Setter for generatedTags.
         * @param {string} props.filenameKeywords - Keywords for filename generation.
         * @param {function} props.setFilenameKeywords - Setter for filenameKeywords.
         * @param {function} props.setGeneratedFilename - Setter for generatedFilename.
         */
        const OptimizationForm = ({
            currentTitle, setCurrentTitle,
            mainTopic, setMainTopic,
            targetAudience, setTargetAudience,
            additionalContent, setAdditionalContent,
            keywordSearchQuery, setKeywordSearchQuery,
            trendingKeywords, setTrendingKeywords,
            isSearchingKeywords, setIsSearchingKeywords,
            keywordSearchError, setKeywordSearchError,
            isGeneratingSEO, setIsGeneratingSEO, seoGenerationError, setSeoGenerationError,
            selectedVideoType,
            setGeneratedTitle, setGeneratedDescription, setGeneratedHashtags, setGeneratedTags,
            filenameKeywords, setFilenameKeywords, setGeneratedFilename // New props for filename generation
        }) => {

            /**
             * Function to simulate searching for trending keywords.
             * In a real-world application, this would involve calling a backend
             * service that interfaces with a search API (e.g., Google Trends API, YouTube Data API)
             * to bypass CORS issues and securely handle API keys.
             * For this local HTML file, we provide a mock response.
             */
            const searchTrendingKeywords = async () => {
                if (!keywordSearchQuery.trim()) {
                    setKeywordSearchError("Please enter a query to search for trending keywords.");
                    return;
                }
                setIsSearchingKeywords(true);
                setKeywordSearchError(null);
                setTrendingKeywords([]); // Clear previous results

                try {
                    // Simulate network delay for a more realistic user experience
                    await new Promise(resolve => setTimeout(resolve, 1500));
                    // Hardcoded mock keywords based on the query for demonstration purposes
                    const mockKeywords = [
                        `${keywordSearchQuery} trends 2024`,
                        `top ${keywordSearchQuery} videos`,
                        `viral ${keywordSearchQuery} content`,
                        `${keywordSearchQuery} challenges`,
                        `best ${keywordSearchQuery} tutorials`,
                        `${keywordSearchQuery} community topics`
                    ];
                    setTrendingKeywords(mockKeywords);

                } catch (error) {
                    console.error("Error searching trending keywords:", error);
                    setKeywordSearchError("Failed to search trending keywords. Please try again.");
                } finally {
                    setIsSearchingKeywords(false);
                }
            };

            /**
             * Function to generate SEO content (title, description, hashtags, tags, filename)
             * by calling the Gemini API (gemini-2.0-flash model).
             * It constructs a prompt based on user inputs and expects a JSON response.
             */
            const generateSEOContent = async () => {
    if (!mainTopic.trim()) {
        setSeoGenerationError("Please enter a main topic for your video.");
        return;
    }

    setIsGeneratingSEO(true);
    setSeoGenerationError(null);

    const prompt = `Generate an optimized YouTube video title, ... (same as before)`;

    try {
        let chatHistory = [];
        chatHistory.push({ role: "user", parts: [{ text: prompt }] });
        const payload = {
            contents: chatHistory,
            generationConfig: {
                responseMimeType: "application/json",
                responseSchema: {
                    type: "OBJECT",
                    properties: {
                        "title": { "type": "STRING" },
                        "description": { "type": "STRING" },
                        "hashtags": { "type": "ARRAY", "items": { "type": "STRING" } },
                        "tags": { "type": "ARRAY", "items": { "type": "STRING" } },
                        "filename": { "type": "STRING" }
                    },
                    "propertyOrdering": ["title", "description", "hashtags", "tags", "filename"]
                }
            }
        };

        const apiKey = ""; // Set your API key here
        const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;

        const response = await fetch(apiUrl, {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify(payload)
        });

        // Try to parse as JSON; safely handle parse errors
        let result;
        try {
            result = await response.json();
        } catch (parseError) {
            setSeoGenerationError("The AI did not return valid JSON. Please check your API key or try again later.");
            console.error("Response not JSON:", parseError);
            setIsGeneratingSEO(false);
            return;
        }

        // If the API returned an error object, display it
        if (result.error) {
            setSeoGenerationError("API Error: " + (result.error.message || "Unknown error. Please check your API key and quota."));
            console.error("API error response:", result);
            setIsGeneratingSEO(false);
            return;
        }

        // Try to extract the content as before
        if (result.candidates && result.candidates.length > 0 &&
            result.candidates[0].content && result.candidates[0].content.parts &&
            result.candidates[0].content.parts.length > 0) {
            
            let jsonString = result.candidates[0].content.parts[0].text;
            let parsedJson;
            try {
                parsedJson = JSON.parse(jsonString);
            } catch (jsonParseErr) {
                setSeoGenerationError("The AI returned text, but not valid JSON. Please try again later or adjust your prompt.");
                console.error("AI returned invalid JSON text:", jsonString);
                setIsGeneratingSEO(false);
                return;
            }

            setGeneratedTitle(parsedJson.title || '');
            setGeneratedDescription(parsedJson.description || '');
            setGeneratedHashtags(parsedJson.hashtags ? parsedJson.hashtags.map(h => `#${h}`).join(' ') : '');
            setGeneratedTags(parsedJson.tags ? parsedJson.tags.join(', ') : '');
            setGeneratedFilename(parsedJson.filename || '');
        } else {
            setSeoGenerationError("Failed to generate SEO content. The AI response was not in the expected format. Please try again.");
            // Also show the raw response for debugging (optional)
            console.error("Unexpected AI response structure:", result);
        }
    } catch (error) {
        setSeoGenerationError("Failed to generate SEO content. Please check your internet connection, API key, and try again.");
        console.error("Error generating SEO content:", error);
    } finally {
        setIsGeneratingSEO(false);
    }
};

            return (
                <section className="bg-pure-white p-6 rounded-lg shadow-md">
                    <h2 className="text-xl font-bold mb-6 flex items-center text-charcoal">
                        <svg className="w-6 h-6 mr-2 text-youtube-red" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path>
                        </svg>
                        SEO Optimization
                    </h2>
                    <div className="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                        <div>
                            <label htmlFor="current-title" className="block text-sm font-medium text-charcoal mb-2">
                                Current Title
                            </label>
                            <input
                                type="text"
                                id="current-title"
                                className="w-full p-3 border border-gray-300 rounded-lg focus:ring-youtube-red focus:border-youtube-red"
                                placeholder="Enter your current video title..."
                                value={currentTitle}
                                onChange={(e) => setCurrentTitle(e.target.value)}
                            />
                        </div>
                        <div>
                            <label htmlFor="main-topic" className="block text-sm font-medium text-charcoal mb-2">
                                Main Topic <span className="text-red-500">*</span>
                            </label>
                            <input
                                type="text"
                                id="main-topic"
                                className="w-full p-3 border border-gray-300 rounded-lg focus:ring-youtube-red focus:border-youtube-red"
                                placeholder="What's your video about?"
                                value={mainTopic}
                                onChange={(e) => setMainTopic(e.target.value)}
                                required
                            />
                        </div>
                    </div>
                    <div className="mb-6">
                        <label htmlFor="target-audience" className="block text-sm font-medium text-charcoal mb-2">
                            Target Audience
                        </label>
                        <select
                            id="target-audience"
                            className="w-full p-3 border border-gray-300 rounded-lg focus:ring-youtube-red focus:border-youtube-red bg-pure-white"
                            value={targetAudience}
                            onChange={(e) => setTargetAudience(e.target.value)}
                        >
                            <option value="">Select an audience</option>
                            <option value="gamers">Gamers</option>
                            <option value="tech-enthusiasts">Tech Enthusiasts</option>
                            <option value="foodies">Foodies</option>
                            <option value="travelers">Travelers</option>
                            <option value="students">Students</option>
                            <option value="general">General Audience</option>
                        </select>
                    </div>
                    <div className="mb-6">
                        <label htmlFor="additional-content" className="block text-sm font-medium text-charcoal mb-2">
                            Additional Context (Optional)
                        </label>
                        <textarea
                            id="additional-content"
                            rows="4"
                            className="w-full p-3 border border-gray-300 rounded-lg focus:ring-youtube-red focus:border-youtube-red resize-none"
                            placeholder="Any specific keywords, competitors, or additional information..."
                            value={additionalContent}
                            onChange={(e) => setAdditionalContent(e.target.value)}
                        ></textarea>
                    </div>

                    {/* Filename Keywords Input */}
                    <div className="mb-6">
                        <label htmlFor="filename-keywords" className="block text-sm font-medium text-charcoal mb-2">
                            Keywords for Filename (Ranking & Trending)
                        </label>
                        <input
                            type="text"
                            id="filename-keywords"
                            className="w-full p-3 border border-gray-300 rounded-lg focus:ring-youtube-red focus:border-youtube-red"
                            placeholder="e.g., 'best tutorial', 'viral challenge', 'top 10'"
                            value={filenameKeywords}
                            onChange={(e) => setFilenameKeywords(e.target.value)}
                        />
                    </div>

                    {/* Trending Keywords Search Section */}
                    <div className="mb-6 p-4 bg-gray-50 rounded-lg border border-gray-200">
                        <h3 className="text-lg font-semibold mb-3 text-charcoal">Search Trending Keywords</h3>
                        <div className="flex flex-col sm:flex-row space-y-3 sm:space-y-0 sm:space-x-3">
                            <input
                                type="text"
                                className="flex-1 p-3 border border-gray-300 rounded-lg focus:ring-electric-blue focus:border-electric-blue"
                                placeholder="e.g., 'gaming trends', 'cooking hacks'"
                                value={keywordSearchQuery}
                                onChange={(e) => setKeywordSearchQuery(e.target.value)}
                            />
                            <button
                                onClick={searchTrendingKeywords}
                                className="bg-electric-blue text-pure-white px-5 py-3 rounded-lg font-semibold shadow-md hover:bg-electric-blue-dark transition-colors duration-200 flex items-center justify-center"
                                disabled={isSearchingKeywords}
                            >
                                {isSearchingKeywords ? (
                                    <svg className="animate-spin h-5 w-5 text-pure-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                                        <circle className="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" strokeWidth="4"></circle>
                                        <path className="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                                    </svg>
                                ) : (
                                    <>
                                        <svg className="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
                                        </svg>
                                        Search
                                    </>
                                )}
                            </button>
                        </div>
                        {keywordSearchError && <p className="text-red-500 text-sm mt-2">{keywordSearchError}</p>}
                        {trendingKeywords.length > 0 && (
                            <div className="mt-4">
                                <p className="text-sm font-medium text-charcoal mb-1">Found Trending Keywords:</p>
                                <div className="flex flex-wrap gap-2">
                                    {trendingKeywords.map((keyword, index) => (
                                        <span key={index} className="bg-gray-200 text-gray-700 text-xs px-3 py-1 rounded-full">
                                            {keyword}
                                        </span>
                                    ))}
                                </div>
                            </div>
                        )}
                    </div>

                    {/* Generate SEO Content Button */}
                    <div className="mb-6">
                        <button
                            onClick={generateSEOContent}
                            className="w-full bg-youtube-red text-pure-white px-6 py-3 rounded-lg font-semibold shadow-md hover:bg-youtube-red-dark transition-colors duration-200 flex items-center justify-center"
                            disabled={isGeneratingSEO || !mainTopic.trim()}
                        >
                            {isGeneratingSEO ? (
                                <svg className="animate-spin h-5 w-5 text-pure-white mr-3" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                                    <circle className="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" strokeWidth="4"></circle>
                                    <path className="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                                </svg>
                            ) : (
                                <svg className="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                                    <path fillRule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-11a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V7z" clipRule="evenodd"></path>
                                </svg>
                            )}
                            Generate SEO Content
                        </button>
                        {seoGenerationError && <p className="text-red-500 text-sm mt-2 text-center">{seoGenerationError}</p>}
                    </div>
                </section>
            );
        };

        /**
         * ResultsDisplay Component
         * Displays the AI-generated SEO content with copy-to-clipboard functionality.
         * @param {object} props - Component props.
         * @param {string} props.generatedTitle - The generated video title.
         * @param {string} props.generatedDescription - The generated description.
         * @param {string} props.generatedHashtags - The generated hashtags.
         * @param {string} props.generatedTags - The generated keyword tags.
         * @param {string} props.generatedFilename - The generated filename.
         */
        const ResultsDisplay = ({ generatedTitle, generatedDescription, generatedHashtags, generatedTags, generatedFilename }) => (
            (generatedTitle || generatedFilename) && ( // Only render if there's generated content
                <div className="mt-8 p-6 bg-blue-50 rounded-lg border border-electric-blue shadow-md">
                    <h3 className="text-lg font-semibold mb-4 text-electric-blue">Generated SEO Content</h3>

                    {generatedTitle && (
                        <div className="mb-4">
                            <label htmlFor="generated-title" className="block text-sm font-medium text-electric-blue mb-2">
                                Optimized Title
                            </label>
                            <div className="flex">
                                <input
                                    type="text"
                                    id="generated-title"
                                    className="flex-1 p-3 border border-blue-300 rounded-l-lg bg-pure-white focus:outline-none text-charcoal"
                                    readOnly
                                    value={generatedTitle}
                                />
                                <button
                                    onClick={() => copyToClipboard(generatedTitle)}
                                    className="bg-electric-blue text-pure-white px-4 py-2 rounded-r-lg hover:bg-electric-blue-dark transition-colors duration-200"
                                    title="Copy Title"
                                >
                                    <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2.586a1 1 0 01.707.293l3.414 3.414a1 1 0 01.293.707V15m-4-4v4m-8-4v4"></path>
                                    </svg>
                                </button>
                            </div>
                        </div>
                    )}

                    {generatedDescription && (
                        <div className="mb-4">
                            <label htmlFor="generated-description" className="block text-sm font-medium text-electric-blue mb-2">
                                Description
                            </label>
                            <div className="flex">
                                <textarea
                                    id="generated-description"
                                    rows="6"
                                    className="flex-1 p-3 border border-blue-300 rounded-l-lg bg-pure-white focus:outline-none resize-none text-charcoal"
                                    readOnly
                                    value={generatedDescription}
                                ></textarea>
                                <button
                                    onClick={() => copyToClipboard(generatedDescription)}
                                    className="bg-electric-blue text-pure-white px-4 py-2 rounded-r-lg hover:bg-electric-blue-dark transition-colors duration-200"
                                    title="Copy Description"
                                >
                                    <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2.586a1 1 0 01.707.293l3.414 3.414a1 1 0 01.293.707V15m-4-4v4m-8-4v4"></path>
                                    </svg>
                                </button>
                            </div>
                        </div>
                    )}

                    {generatedHashtags && (
                        <div className="mb-4">
                            <label htmlFor="generated-hashtags" className="block text-sm font-medium text-electric-blue mb-2">
                                Hashtags
                            </label>
                            <div className="flex">
                                <input
                                    type="text"
                                    id="generated-hashtags"
                                    className="flex-1 p-3 border border-blue-300 rounded-l-lg bg-pure-white focus:outline-none text-charcoal"
                                    readOnly
                                    value={generatedHashtags}
                                />
                                <button
                                    onClick={() => copyToClipboard(generatedHashtags)}
                                    className="bg-electric-blue text-pure-white px-4 py-2 rounded-r-lg hover:bg-electric-blue-dark transition-colors duration-200"
                                    title="Copy Hashtags"
                                >
                                    <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2.586a1 1 0 01.707.293l3.414 3.414a1 1 0 01.293.707V15m-4-4v4m-8-4v4"></path>
                                    </svg>
                                </button>
                            </div>
                        </div>
                    )}

                    {generatedTags && (
                        <div className="mb-4">
                            <label htmlFor="generated-tags" className="block text-sm font-medium text-electric-blue mb-2">
                                Keyword Tags
                            </label>
                            <div className="flex">
                                <input
                                    type="text"
                                    id="generated-tags"
                                    className="flex-1 p-3 border border-blue-300 rounded-l-lg bg-pure-white focus:outline-none text-charcoal"
                                    readOnly
                                    value={generatedTags}
                                />
                                <button
                                    onClick={() => copyToClipboard(generatedTags)}
                                    className="bg-electric-blue text-pure-white px-4 py-2 rounded-r-lg hover:bg-electric-blue-dark transition-colors duration-200"
                                    title="Copy Tags"
                                >
                                    <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2.586a1 1 0 01.707.293l3.414 3.414a1 1 0 01.293.707V15m-4-4v4m-8-4v4"></path>
                                    </svg>
                                </button>
                            </div>
                        </div>
                    )}

                    {generatedFilename && (
                        <div>
                            <label htmlFor="generated-filename" className="block text-sm font-medium text-electric-blue mb-2">
                                Generated Filename
                            </label>
                            <div className="flex">
                                <input
                                    type="text"
                                    id="generated-filename"
                                    className="flex-1 p-3 border border-blue-300 rounded-l-lg bg-pure-white focus:outline-none text-charcoal"
                                    readOnly
                                    value={generatedFilename}
                                />
                                <button
                                    onClick={() => copyToClipboard(generatedFilename)}
                                    className="bg-electric-blue text-pure-white px-4 py-2 rounded-r-lg hover:bg-electric-blue-dark transition-colors duration-200"
                                    title="Copy Filename"
                                >
                                    <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2.586a1 1 0 01.707.293l3.414 3.414a1 1 0 01.293.707V15m-4-4v4m-8-4v4"></path>
                                    </svg>
                                </button>
                            </div>
                        </div>
                    )}
                </div>
            )
        );

        // --- PAGES ---

        /**
         * DashboardPage Component
         * Represents the main SEO optimization dashboard.
         * It orchestrates the VideoTypeSelector, OptimizationForm, and ResultsDisplay components.
         */
        const DashboardPage = () => {
            // States for video type selection
            const [selectedVideoType, setSelectedVideoType] = useState('regular');

            // States for SEO Optimization input fields
            const [currentTitle, setCurrentTitle] = useState('');
            const [mainTopic, setMainTopic] = useState('');
            const [targetAudience, setTargetAudience] = useState('');
            const [additionalContent, setAdditionalContent] = useState('');

            // States for Trending Keywords Search functionality
            const [keywordSearchQuery, setKeywordSearchQuery] = useState('');
            const [trendingKeywords, setTrendingKeywords] = useState([]);
            const [isSearchingKeywords, setIsSearchingKeywords] = useState(false);
            const [keywordSearchError, setKeywordSearchError] = useState(null);

            // States for Generated SEO Content (output from AI)
            const [generatedTitle, setGeneratedTitle] = useState('');
            const [generatedDescription, setGeneratedDescription] = useState('');
            const [generatedHashtags, setGeneratedHashtags] = useState('');
            const [generatedTags, setGeneratedTags] = useState('');
            const [generatedFilename, setGeneratedFilename] = useState(''); // New state for generated filename
            const [isGeneratingSEO, setIsGeneratingSEO] = useState(false);
            const [seoGenerationError, setSeoGenerationError] = useState(null);

            // State for Filename Keywords input
            const [filenameKeywords, setFilenameKeywords] = useState(''); // New state for filename keywords

            return (
                <>
                    <VideoTypeSelector
                        selectedVideoType={selectedVideoType}
                        setSelectedVideoType={setSelectedVideoType}
                    />
                    <OptimizationForm
                        currentTitle={currentTitle}
                        setCurrentTitle={setCurrentTitle}
                        mainTopic={mainTopic}
                        setMainTopic={setMainTopic}
                        targetAudience={targetAudience}
                        setTargetAudience={setTargetAudience}
                        additionalContent={additionalContent}
                        setAdditionalContent={setAdditionalContent}
                        keywordSearchQuery={keywordSearchQuery}
                        setKeywordSearchQuery={setKeywordSearchQuery}
                        trendingKeywords={trendingKeywords}
                        setTrendingKeywords={setTrendingKeywords}
                        isSearchingKeywords={isSearchingKeywords}
                        setIsSearchingKeywords={setIsSearchingKeywords}
                        keywordSearchError={keywordSearchError}
                        setKeywordSearchError={setKeywordSearchError}
                        isGeneratingSEO={isGeneratingSEO}
                        setIsGeneratingSEO={setIsGeneratingSEO}
                        seoGenerationError={seoGenerationError}
                        setSeoGenerationError={setSeoGenerationError}
                        selectedVideoType={selectedVideoType}
                        setGeneratedTitle={setGeneratedTitle}
                        setGeneratedDescription={setGeneratedDescription}
                        setGeneratedHashtags={setGeneratedHashtags}
                        setGeneratedTags={setGeneratedTags}
                        filenameKeywords={filenameKeywords} // Pass new state
                        setFilenameKeywords={setFilenameKeywords} // Pass new setter
                        setGeneratedFilename={setGeneratedFilename} // Pass new setter
                    />
                    <ResultsDisplay
                        generatedTitle={generatedTitle}
                        generatedDescription={generatedDescription}
                        generatedHashtags={generatedHashtags}
                        generatedTags={generatedTags}
                        generatedFilename={generatedFilename} // Pass new state
                    />
                </>
            );
        };

        /**
         * ThumbnailPage Component (Placeholder)
         * Represents the AI-powered thumbnail creation section.
         */
        const ThumbnailPage = () => (
            <section className="bg-pure-white p-6 rounded-lg shadow-md h-full flex flex-col items-center justify-center text-gray-500 text-xl">
                <svg className="w-16 h-16 mb-4 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
                </svg>
                <p className="text-center">AI-powered thumbnail creation with before/after comparison coming soon!</p>
            </section>
        );

        /**
         * AnalyticsPage Component (Placeholder)
         * Represents the performance analytics and optimization tips section.
         */
        const AnalyticsPage = () => (
            <section className="bg-pure-white p-6 rounded-lg shadow-md h-full flex flex-col items-center justify-center text-gray-500 text-xl">
                <svg className="w-16 h-16 mb-4 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M11 3.055A9.001 9.001 0 1020.945 13H11V3.055z"></path>
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M20.488 9H15V3.512A9.025 9.025 0 0120.488 9z"></path>
                </svg>
                <p className="text-center">Performance analytics and optimization tips coming soon!</p>
            </section>
        );

        /**
         * Layout Component
         * Provides the overall structure of the application, including the sidebar and main content area.
         * @param {object} props - Component props.
         * @param {string} props.selectedTool - The currently selected tool (for sidebar active state).
         * @param {function} props.setSelectedTool - Function to update the selected tool.
         * @param {React.Node} props.children - The content to be displayed in the main area.
         */
        const Layout = ({ selectedTool, setSelectedTool, children }) => (
            <div className="flex bg-pure-white min-h-screen text-charcoal">
                {/* Sidebar */}
                <aside className="w-64 bg-pure-white border-r border-gray-200 p-6 flex flex-col justify-between shadow-md rounded-tr-lg rounded-br-lg">
                    <div>
                        <div className="flex items-center mb-8">
                            <span className="text-youtube-red text-2xl font-bold mr-2">TubeSpark</span>
                            <span className="text-gray-500 text-sm">(Public Preview)</span>
                        </div>
                        <nav>
                            <ul className="space-y-2">
                                <li>
                                    <button
                                        onClick={() => setSelectedTool('seo-optimizer')}
                                        className={`flex items-center w-full p-3 rounded-lg text-left transition-colors duration-200
                                            ${selectedTool === 'seo-optimizer' ? 'bg-red-100 text-youtube-red font-semibold shadow-inner' : 'hover:bg-gray-100'}`}
                                    >
                                        <svg className="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path>
                                        </svg>
                                        YT SEO Pro
                                        {selectedTool === 'seo-optimizer' && <span className="ml-auto text-xs text-gray-500">Optimize + Rank + Grow</span>}
                                    </button>
                                </li>
                                <li>
                                    <button
                                        onClick={() => setSelectedTool('thumbnail-generator')}
                                        className={`flex items-center w-full p-3 rounded-lg text-left transition-colors duration-200
                                            ${selectedTool === 'thumbnail-generator' ? 'bg-red-100 text-youtube-red font-semibold shadow-inner' : 'hover:bg-gray-100'}`}
                                    >
                                        <svg className="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
                                        </svg>
                                        Thumbnail Generator
                                    </button>
                                </li>
                                <li>
                                    <button
                                        onClick={() => setSelectedTool('analytics')}
                                        className={`flex items-center w-full p-3 rounded-lg text-left transition-colors duration-200
                                            ${selectedTool === 'analytics' ? 'bg-red-100 text-youtube-red font-semibold shadow-inner' : 'hover:bg-gray-100'}`}
                                    >
                                        <svg className="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M11 3.055A9.001 9.001 0 1020.945 13H11V3.055z"></path>
                                            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M20.488 9H15V3.512A9.025 9.025 0 0120.488 9z"></path>
                                        </svg>
                                        Analytics
                                    </button>
                                </li>
                            </ul>
                        </nav>
                        <div className="mt-8 pt-6 border-t border-gray-200">
                            <h3 className="text-xs font-semibold text-gray-500 uppercase mb-3">Quick Stats</h3>
                            <div className="bg-gray-50 p-4 rounded-lg shadow-inner">
                                <div className="flex justify-between items-center mb-2">
                                    <span className="text-sm text-gray-600">Videos Optimized</span>
                                    <span className="text-sm font-semibold text-gray-800">12</span>
                                </div>
                                <div className="flex justify-between items-center">
                                    <span className="text-sm text-gray-600">Avg SEO Score</span>
                                    <span className="text-sm font-semibold text-green-600">85/100</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div className="flex items-center text-gray-500 text-sm">
                        <div className="w-8 h-8 bg-gray-200 rounded-full flex items-center justify-center mr-2">U</div>
                        Creator
                    </div>
                </aside>

                {/* Main Content Area */}
                <main className="flex-1 p-8 bg-gray-50 overflow-auto rounded-tl-lg rounded-bl-lg">
                    <div className="flex justify-between items-center mb-8">
                        <h1 className="text-2xl font-bold text-charcoal">Workspace</h1>
                        <div className="flex items-center space-x-4">
                            {/* Settings Icon */}
                            <button className="text-gray-500 hover:text-gray-700 p-2 rounded-full hover:bg-gray-100 transition-colors">
                                <svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4"></path>
                                </svg>
                            </button>
                            {/* Notifications Icon */}
                            <button className="text-gray-500 hover:text-gray-700 p-2 rounded-full hover:bg-gray-100 transition-colors">
                                <svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"></path>
                                </svg>
                            </button>
                            {/* Add Icon */}
                            <button className="text-gray-500 hover:text-gray-700 p-2 rounded-full hover:bg-gray-100 transition-colors">
                                <svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M12 9v3m0 0v3m0-3h3m-3 0H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                </svg>
                            </button>
                            {/* Removed the Publish Button */}
                        </div>
                    </div>
                    {children} {/* This is where the selected page content will be rendered */}
                </main>
            </div>
        );

        // --- MAIN APP COMPONENT ---

        /**
         * App Component
         * The root component that manages the overall application state and routing
         * between different pages/tools.
         */
        const App = () => {
            const [selectedTool, setSelectedTool] = useState('seo-optimizer');

            // Render the Layout component and pass the currently selected tool as children
            return (
                <Layout selectedTool={selectedTool} setSelectedTool={setSelectedTool}>
                    {selectedTool === 'seo-optimizer' && <DashboardPage />}
                    {selectedTool === 'thumbnail-generator' && <ThumbnailPage />}
                    {selectedTool === 'analytics' && <AnalyticsPage />}
                </Layout>
            );
        };

        // Render the main App component into the 'root' div
        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
</body>
</html>
